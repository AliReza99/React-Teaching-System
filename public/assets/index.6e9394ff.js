var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,o=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&l(e,n,t[n]);if(a)for(var n of a(t))s.call(t,n)&&l(e,n,t[n]);return e};import{R as c,i,r as m,a as u,L as d,b as p,T as g,c as f,d as h,m as E,e as x,P as w,f as C,g as v,I as b,C as k,D as y,h as N,j as S,S as D,B as I,k as R,l as T,n as A,o as M,p as j,N as P,q as O,s as $,t as F,u as B,G as Y,v as q,w as H,x as X,M as z,y as L,z as U,A as W,E as V,F as Q,H as G,J,K,O as Z,Q as _,U as ee,V as te,W as ne,X as ae,Y as re,Z as se,_ as le,$ as oe}from"./vendor.e060ecf0.js";const ce=c({key:"socket",default:i("http://localhost:5001")}),ie=c({key:"users",default:[]}),me=c({key:"self",default:{isAdmin:!1,username:""}});const ue=m.exports.memo((({id:e,role:t,onClick:n,text:a,date:r,sender:s,hardness:l,repliedText:o,isAdmin:c,ratingOnChange:i,rate:E})=>{let x=!1;const w=[];let C,v="";"question"===t?(x=!0,w.push("question"),C="Question ",v=`(Hardness: ${l})`):"answer"===t?(w.push("answer"),C=`${s} `,v=`(Replied to: ${o})`):C=s;const[b,k]=m.exports.useState(E);return u.createElement(d,{button:x,onClick:n,className:"listItem"},u.createElement(p,{className:w.join(" "),primary:u.createElement(g,{component:"div"},C," ",u.createElement("span",{className:"caption"},v)," "),secondary:u.createElement(u.Fragment,null,u.createElement(g,{component:"span",style:{display:"block"},variant:"body2",noWrap:!0,color:"textSecondary"},a),c&&"answer"===t&&u.createElement(f,{className:"rating",name:`answer-rating${e}`,value:b,onChange:(e,t)=>{k(t),i(t)},size:"small"}),!c&&"answer"===t&&u.createElement(f,{className:"rating",name:`answer-rating${e}`,value:E,size:"small",readOnly:!0}))}),u.createElement(h,null,u.createElement("div",{className:"status"},`${r.getHours()<10?"0":""}${r.getHours()}:${r.getMinutes()<10?"0":""}${r.getMinutes()}`)))}));class de{constructor(e,t,n,a,r,s,l,o){this.id=e,this.sender=t,this.text=n,this.date=new Date(a),this.role=r,this.rate=s,this.hardness=l,this.repliedID=o}}const pe=E((e=>({sidebar:{display:"flex",flexDirection:"column",position:"fixed",width:"420px",height:"calc(100vh - 65px)",right:"0",top:"0",visibility:"hidden",borderRadius:"10px 0 0 10px",padding:"0px 0",transform:"translateX(100%)",transition:"visibility .2s,right .3s,transform .3s","&.show":{transform:"translateX(0)",visibility:"visible"},"& .inputContainer":{display:"flex",background:"#2B2E2F",margin:"8px 8px",borderRadius:"30px",padding:"1px 0 1px 10px "},"& .btnsContainer":{padding:"3px 8px",display:"flex",margin:"5px 0"},"& .input":{flexGrow:"1",padding:"0 10px"},"& .messages":{overflowY:"scroll",flexGrow:1},"& .listHeader":{background:"#262829"}}}))),ge=m.exports.memo((({showChat:e,setShowChat:t})=>{var n;const[a,r]=m.exports.useState([]),[s,l]=m.exports.useState("message"),[c,i]=m.exports.useState(5),[f,h]=m.exports.useState(null),[E,A]=m.exports.useState(""),M=x(ce),j=x(ie),P=x(me),O=m.exports.useRef(null),$=pe();return m.exports.useEffect((()=>{f||l("message")}),[f]),m.exports.useEffect((()=>{M.on("chat",(({sender:e,text:t,date:n,id:a,role:s,rate:l,hardness:o,repliedID:c})=>{const i=new de(a,e,t,n,s,l,o,c);r((e=>[...e,i]))})),M.on("full-chat-update",(e=>{const t=e.map((e=>new de(e.id,e.sender,e.text,e.date,e.role,e.rate,e.hardness,e.repliedID)));r((()=>t)),0===t.length&&h(null)})),M.on("update-message",(e=>{r((t=>{const n=t.findIndex((t=>t.id===e.id));if(-1!==n){const a=o({},t[n]);a.rate=e.rate;return[...t.slice(0,n),a,...t.slice(n+1)]}return t}))}))}),[]),u.createElement(w,{square:!0,className:[$.sidebar,e?"show":""].join(" ")},u.createElement("div",{className:"users"},u.createElement(C,{subheader:u.createElement(v,{component:"div",className:"listHeader"},"People ",j.length>0?`(${j.length+1})`:""," ",u.createElement(b,{style:{float:"right"},onClick:()=>t(!1)},u.createElement(k,null))),style:{maxHeight:"300px",overflowY:"scroll"}},P.username.length>0&&u.createElement(d,null,u.createElement(p,{className:"selfUserContainer",primary:u.createElement(g,{component:"div"},P.username," ",u.createElement("span",{className:"caption"},"   You")," ")})),j.map((e=>u.createElement(d,{key:e.connectionID},u.createElement(p,{primary:e.username})))))),u.createElement("div",{className:"messages"},u.createElement(C,{subheader:u.createElement(v,{className:"listHeader",component:"div"},"Messages ",a.length>0?`(${a.length})`:""),disablePadding:!0},a.map((e=>{var t;let n=e.role,r=null,s=null==(t=a.filter((t=>t.id===e.repliedID))[0])?void 0:t.text,o=e.rate||0;"question"===n&&(r=()=>{var t;t=e.id,h(t),O.current.focus(),l("answer")});return u.createElement(ue,{key:e.id,id:e.id,rate:o,ratingOnChange:t=>{((e,t)=>{M.emit("rate-message",{messageID:t,rate:e})})(t,e.id)},sender:e.sender,repliedText:s,hardness:e.hardness,role:n,onClick:r,text:e.text,date:e.date,isAdmin:P.isAdmin})})))),f&&u.createElement(u.Fragment,null,u.createElement(y,null),u.createElement("div",{className:"replyContainer"},u.createElement("span",null,u.createElement(N,null)),u.createElement("span",{className:"text"},u.createElement("span",null,"  Question:  "),null==(n=a.filter((e=>e.id===f))[0])?void 0:n.text),u.createElement(b,{size:"small",onClick:()=>{h(null)},style:{float:"right"}},u.createElement(k,null)))),u.createElement("form",{className:"form",onSubmit:e=>{if(e.preventDefault(),""===E.trim())return;const t={text:E.trim()};P.isAdmin&&"question"===s&&(t.hardness=c),f&&(t.repliedID=f),M.emit("chat",t),A(""),h(null)}},u.createElement("div",{className:"inputContainer"},u.createElement(S,{className:"input",placeholder:f?"Reply...":"Message...",value:E,onChange:e=>{A(e.target.value)},variant:"outlined",inputProps:{ref:O}}),u.createElement(b,{disabled:0===E.length,type:"submit","aria-label":"Send Message"},u.createElement(D,null)))),P.isAdmin&&u.createElement("div",{className:"btnsContainer"},u.createElement("div",{className:"msgMode"},u.createElement(I,{onClick:()=>{l("question")}},"Question ","question"===s?u.createElement(R,null):""," "),u.createElement(I,{onClick:()=>{l("message")}},"Message ","message"===s?u.createElement(R,null):""," "),"question"===s&&u.createElement(S,{type:"number",startAdornment:u.createElement(T,{position:"start",component:"label"},"Hardness: "),inputProps:{min:0,max:10},onChange:e=>{i(e.target.value)},value:c}))))}));const fe=e=>{const t=e.getContext("2d"),n=t.fillStyle;t.clearRect(0,0,e.width,e.height),t.fillStyle="#fff",t.fillRect(0,0,e.width,e.height),t.fillStyle=n},he=e=>{const t=e.getContext("2d");let n=!1,a=0,r=0;const s=(e,t,n,a,r)=>{e.beginPath(),e.lineWidth=3,e.moveTo(t,n),e.lineTo(a,r),e.stroke(),e.closePath()};e.onmousedown=e=>{a=e.offsetX,r=e.offsetY,n=!0},e.onmousemove=e=>{!0===n&&(s(t,a,r,e.offsetX,e.offsetY),a=e.offsetX,r=e.offsetY)},e.onmouseup=e=>{!0===n&&(s(t,a,r,e.offsetX,e.offsetY),a=0,r=0,n=!1)}},Ee=e=>{const t=e.getContext("2d");let n,a;e.onmouseup=r=>{let s=e.getBoundingClientRect();const l=r.clientX-s.left,o=r.clientY-s.top;((e,t,n,a,r)=>{let s=.5*(a-t),l=.5*(r-n),o=t+s,c=n+l,i=.01,m=i,u=2*Math.PI-i;for(e.beginPath(),e.moveTo(o+s*Math.cos(0),c+l*Math.sin(0));m<u;m+=i)e.lineTo(o+s*Math.cos(m),c+l*Math.sin(m));e.closePath(),e.stroke()})(t,n,a,l,o)},e.onmousedown=t=>{let r=e.getBoundingClientRect();n=t.clientX-r.left,a=t.clientY-r.top}},xe=["#000000","#E53935","#CFD8DC","#8E24AA","#303F9F","#0097A7","#FFEB3B","#76FF03","#4FC3F7","#CE93D8"],we=e=>{e.onmousedown=null,e.onmousemove=null,e.onmouseup=null,e.onclick=null},Ce=m.exports.memo((({isSharing:e})=>{const[t,n]=m.exports.useState(4),[a,r]=m.exports.useState(!1),[s,l]=m.exports.useState(null),[o,c]=m.exports.useState(0),[i,d]=m.exports.useState(null),[p,g]=m.exports.useState(xe[0]),f=m.exports.useRef(null),h=m.exports.useRef(null),E=m.exports.useRef(!1),w=m.exports.useRef(null),C=m.exports.useRef(null),v=m.exports.useRef(null),k=x(ce),y=(e=800,t=700)=>{f.current.width=e,f.current.height=t;const n=v.current.width,a=v.current.height,r=f.current.width,s=f.current.height;console.log(`parent size: ${n}x${a}`),console.log(`whiteboard size: ${r}x${s}`)};return m.exports.useEffect((()=>{((e,t)=>{const n=e.getContext("2d");n.strokeStyle=t,n.fillStyle=t})(f.current,p.hex)}),[p]),m.exports.useEffect((()=>{s&&i&&s.getPage(i).then((e=>{let t=e.getViewport({scale:1});f.current.height=t.height,f.current.width=t.width;const n={canvasContext:f.current.getContext("2d"),viewport:t};e.render(n)}))}),[i,s]),m.exports.useEffect((()=>{if(e){fe(f.current),he(f.current);const e=.5;w.current=window.setInterval((()=>{const t=f.current.toDataURL("image/png",e);k.emit("whiteboard-data",{base64ImageData:t})}),1e3)}else w.current&&window.clearInterval(w.current)}),[e]),m.exports.useEffect((()=>(y(),fe(f.current),()=>{window.clearInterval(w.current)})),[]),u.createElement("div",{className:"whiteboardContainer",ref:v},u.createElement("div",{className:"canvasContainer",ref:C},u.createElement("canvas",{ref:f})),u.createElement("div",{className:"buttonsContainer"},u.createElement(A,{title:"Add Image",arrow:!0},u.createElement(b,{className:"button",component:"label"},u.createElement(M,null),u.createElement("input",{type:"file",onChange:()=>{const e=h.current.files[0];if(!(e=>e&&"image"===e.type.split("/")[0])(e))return void console.log("selected file is not image format");l(null),c(0),d(null),y();const t=f.current.getContext("2d"),n=new FileReader;n.readAsDataURL(e),n.onload=e=>{if(e.target.readyState===FileReader.DONE){const n=new Image;n.src=e.target.result;const a=f.current.width,r=f.current.height;n.onload=()=>{t.drawImage(n,0,0,a,r)}}}},ref:h,hidden:!0}))),u.createElement(A,{title:"Add PDF",arrow:!0},u.createElement(b,{className:"button",component:"label"},u.createElement(j,null),u.createElement("input",{type:"file",onChange:()=>{const e=window["pdfjs-dist/build/pdf"];if(!e)return void console.log("pdfjsLib is not supported");const t=E.current.files[0];if("application/pdf"!==t.type)return void console.error(t.name,"is not a pdf file.");const n=new FileReader;n.onload=function(){const t=new Uint8Array(this.result);e.getDocument(t).promise.then((e=>{l(e),c(e.numPages),d(1)}))},n.readAsArrayBuffer(t)},ref:E,hidden:!0}))),s&&u.createElement(u.Fragment,null,u.createElement(b,{className:"button",onClick:()=>{i>1&&d(i-1)},disabled:1===i},u.createElement(P,{style:{transform:"rotate(180deg)"}})),u.createElement(b,{className:"button",onClick:()=>{i<o&&d(i+1)},disabled:i===o},u.createElement(P,null))),u.createElement(A,{title:"Line",arrow:!0},u.createElement(b,{className:[0===t?"selected":"","button"].join(" "),onClick:()=>{n(0),we(f.current),(e=>{const t=e.getContext("2d");let n=0,a=0;e.onmousedown=e=>{n=e.offsetX,a=e.offsetY},e.onmouseup=e=>{let r=e.offsetX,s=e.offsetY;t.beginPath(),t.lineWidth="3",t.moveTo(n,a),t.lineTo(r,s),t.stroke()}})(f.current)}},u.createElement(O,null))),u.createElement(A,{title:"Square",arrow:!0},u.createElement(b,{className:[1===t?"selected":"","button"].join(" "),onClick:()=>{n(1),we(f.current),(e=>{const t=e.getContext("2d");let n=0,a=0;e.onmousedown=e=>{n=e.offsetX,a=e.offsetY},e.onmouseup=e=>{let r=e.offsetX-n,s=e.offsetY-a;t.beginPath(),t.rect(n,a,r,s),t.stroke()}})(f.current)}},u.createElement($,null))),u.createElement(A,{title:"Circle",arrow:!0},u.createElement(b,{className:[2===t?"selected":"","button"].join(" "),onClick:()=>{n(2),we(f.current),Ee(f.current)}},u.createElement(F,null))),u.createElement(A,{title:"Text",arrow:!0},u.createElement(b,{className:[3===t?"selected":"","button"].join(" "),onClick:()=>{n(3),we(f.current),(e=>{const t=e.getContext("2d");let n=0,a=0;e.onclick=e=>{n=e.offsetX,a=e.offsetY;const r=prompt("Enter Text");t.font="20px Arial",t.fillText(r,n,a)}})(f.current)}},u.createElement(B,null))),u.createElement(A,{title:"Draw",arrow:!0},u.createElement(b,{className:[4===t?"selected":"","button"].join(" "),onClick:()=>{n(4),we(f.current),he(f.current)}},u.createElement(Y,null))),u.createElement(I,{className:"button",onClick:()=>{fe(f.current)}},"Clear"),u.createElement(q,{onClickAway:()=>{r(!1)}},u.createElement("div",{className:"colorPickerContainer"},u.createElement(b,{className:"button",onClick:()=>{r((e=>!e))}},u.createElement(H,null)),u.createElement("div",{className:["colorPickerBlockContainer",a?"show":""].join(" ")},u.createElement(X,{color:p,width:170,onChangeComplete:g,colors:xe}))))))})),ve=E((e=>({nav:{position:"fixed",width:"100%",bottom:"0",background:"hsl(210, 3%, 13%)",height:"65px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 15px","& .items":{flex:"1 1 0",display:"flex"},"& .center":{justifyContent:"center"},"& .right":{justifyContent:"flex-end"},"& button":{margin:"0 9px",background:"hsl(210, 3%, 17%)",transition:"background .1s",fontSize:"inherit"},"& .redBackground":{background:"#B71C1C","&:hover":{background:"#dd2323"}}}}))),be=m.exports.memo((()=>{const[e,t]=m.exports.useState(new Date),n=()=>{t(new Date)};return m.exports.useEffect((()=>{const e=window.setInterval(n,6e4);return()=>{window.clearInterval(e)}}),[]),u.createElement(u.Fragment,null,`${e.getHours()<10?"0":""}${e.getHours()>12?e.getHours()-12:e.getHours()}:${e.getMinutes()<10?"0":""}${e.getMinutes()}  ${e.getHours()>12?"PM":"AM"} `)})),ke=({shareWhiteboardClick:e,exportUsersActivity:t,exportChatMessages:n,toggleChats:a,clearChat:r,isAdmin:s,roomName:l,fastplayClick:o,shareMicrophoneOnClick:c,micIsSharing:i,shareDesktopOnClick:p,desktopIsSharing:g})=>{const[f,h]=m.exports.useState(!1),E=ve();return u.createElement(w,{className:E.nav},u.createElement("div",{className:"items"},u.createElement(be,null),"| ",l),u.createElement("div",{className:"items center"},u.createElement(b,{onClick:c,"aria-label":"Share Microphone",className:i?"":"redBackground"},i?u.createElement(z,null):u.createElement(L,null)),u.createElement(b,{onClick:p,"aria-label":"Share Desktop",className:g?"":"redBackground"},g?u.createElement(U,null):u.createElement(W,null)),u.createElement(b,{onClick:e},u.createElement(V,null)),u.createElement(b,{onClick:o},u.createElement(Q,null)),s&&u.createElement(q,{onClickAway:()=>h(!1)},u.createElement("div",{className:"moreContainer"},u.createElement(b,{onClick:()=>{h((e=>!e))}},u.createElement(G,null)),u.createElement(C,{className:["moreList",f?"show":""].join(" ")},u.createElement(d,{button:!0,className:"listItem",onClick:n}," Export Room Chats "),u.createElement(d,{button:!0,className:"listItem",onClick:t},"Export Users Activity")))),u.createElement(b,{"aria-label":"hangup",className:"redBackground"},u.createElement(J,null))),u.createElement("div",{className:"items right"},s&&u.createElement(b,{onClick:r},u.createElement(K,null)),u.createElement(b,{"aria-label":"open chats",onClick:a},u.createElement(Z,null))))};class ye{constructor(e,t,n){this.stream=e,this.target=t,this.username=n}}class Ne{constructor(e,t){this.username=e,this.connectionID=t}}const Se=(e,t,n)=>{e&&e.getTracks().forEach((e=>{e.kind===t&&(e.enabled=n)}))};function De(e){const[a,r]=m.exports.useState("room1"),[s,l]=m.exports.useState(""),[c,i]=m.exports.useState(!0),[d,p]=m.exports.useState(!1),[g,f]=m.exports.useState(!1),[h,E]=m.exports.useState(!1),[C,v]=m.exports.useState([]),[y,N]=m.exports.useState(null),[D,R]=m.exports.useState(!1),[T,A]=m.exports.useState(""),[M,j]=m.exports.useState(""),[P,O]=m.exports.useState(!1),[$,F]=m.exports.useState(""),[B,Y]=m.exports.useState(!0),q=m.exports.useRef(!1),H=m.exports.useRef({}),X=m.exports.useRef(null),z=m.exports.useRef(null),L=m.exports.useRef([]),U=m.exports.useRef(!1),W=x(ce),V=_(ie),[Q,G]=ee(me),J=m.exports.useCallback(((e,t,n)=>{console.log("addstreams ",n),v((a=>{const r=a.filter((e=>e.target===t))[0];if(r){const t=e.streams[0].getAudioTracks()[0]||e.streams[0].getVideoTracks()[0];return r.stream.addTrack(t),a}{const r=new ye(e.streams[0],t,n);return[...a.filter((e=>e.stream.id!==r.stream.id)),r]}}))}),[]),K=m.exports.useCallback(((e,t)=>{e.candidate&&W.emit("ice-candidate",{target:t.target,candidate:e.candidate})}),[]),Z=(e,t)=>{const n=new RTCPeerConnection({iceServers:[{urls:"stun:stun.stunprotocol.org"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]});return n.onicecandidate=e=>{K(e,n)},n.ontrack=n=>{J(n,e,t)},n.onnegotiationneeded=()=>{(async e=>{const t=await e.createOffer();await e.setLocalDescription(t),W.emit("offer",{offer:e.localDescription,target:e.target})})(n)},n.target=e,n},te=async()=>{let e;try{e=await new Promise(((e,t)=>{navigator.mediaDevices.getUserMedia({audio:!0}).then((t=>{e(t)})).catch((()=>{t()}))}))}catch(n){return void console.log("Error happens when requesting for capture Microphone",n)}const t=e.getAudioTracks()[0];for(const a in H.current)H.current[a].addTrack(t,e);y?y.addTrack(t,e):N(e),E(!0)},ne=async()=>{let e;try{e=await new Promise(((e,t)=>{navigator.mediaDevices.getDisplayMedia({video:!0}).then((t=>{e(t)})).catch((()=>{t()}))}))}catch(n){return void console.log("Error happens when requesting for capture screen",n)}const t=e.getVideoTracks()[0];for(const a in H.current)H.current[a].addTrack(t,e);y?y.addTrack(t,e):N(e),f(!0)},ae=async()=>{if(U.current)return;R(!0),U.current=!0;const e=L.current;let t=e[0].sender;A(t);for(let n=0;n<e.length;n++)t!==e[n].sender&&(t=e[n].sender,A(t)),z.current.src=e[n].base64ImageData,await new Promise((e=>setTimeout(e,120)));U.current=!1},re=(e,t)=>{t(e.target.value)};m.exports.useEffect((()=>(W.on("connect",(()=>{console.log("socket connection established")})),W.on("export-chat",(e=>{console.log("export all chats",e)})),W.on("export-activities",(e=>{console.log("export all users Activity",e)})),W.on("self-info",(e=>{G((a=>{return r=o({},a),s={isAdmin:e.isAdmin,username:e.username},t(r,n(s));var r,s})),F(e.roomName)})),W.on("disconnect-whiteboard",(()=>{O(!1)})),W.on("full-whiteboard-data",(e=>{0!==e.length&&(L.current=e,q.current=!0,ae())})),W.on("whiteboard-data",(e=>{let t=!1;p((e=>(e&&(t=!0),e))),q.current&&L.current.push(e),t?(console.log("currently presenting"),j(e.sender)):(console.log("currently just watchin"),X.current.src=e.base64ImageData,j(e.sender),O(!0))})),W.on("new-user-joined",(async({target:e,username:t})=>{const n=new Ne(t,e);let a;if(H.current[e]=Z(e,t),V((e=>[...e,n])),N((e=>(a=e,e))),a)a.getTracks().forEach((t=>{H.current[e].addTrack(t,a)}));else{const t=await H.current[e].createOffer();await H.current[e].setLocalDescription(t),W.emit("offer",{offer:H.current[e].localDescription,target:H.current[e].target})}})),W.on("answer",(async({answer:e,target:t})=>{await H.current[t].setRemoteDescription(new RTCSessionDescription(e))})),W.on("offer",(async({offer:e,target:t,username:n})=>{const a=new RTCSessionDescription(e);if(!H.current[t]){H.current[t]=Z(t,n);const e=new Ne(n,t);V((t=>[...t,e]))}await H.current[t].setRemoteDescription(a);const r=await H.current[t].createAnswer();await H.current[t].setLocalDescription(r),W.emit("answer",{answer:r,target:t})})),W.on("ice-candidate",(({incoming:e,target:t})=>{const n=new RTCIceCandidate(e);H.current[t].addIceCandidate(n)})),W.on("user-disconnected",(e=>{v((t=>t.filter((t=>t.target!==e)))),V((t=>(console.log(t),t.filter((t=>t.connectionID!==e)))))})),()=>{W.close()})),[]);return u.createElement(w,{square:!0,className:"container"},u.createElement("div",{className:"main"},u.createElement("form",{onSubmit:e=>{e.preventDefault(),W.emit("join-room",{username:s,roomID:a}),i(!1)},className:["loginForm",c?"show":""].join(" ")},u.createElement(S,{value:s,onChange:e=>{re(e,l)},required:!0,placeholder:"username..."}),u.createElement("br",null),u.createElement(S,{value:a,onChange:e=>{re(e,r)},required:!0,placeholder:"room..."}),u.createElement(I,{type:"submit"},"Join")),u.createElement("div",{className:["streamsContainer",B?"":"expand"].join(" "),style:{gridTemplateColumns:`repeat(${Math.floor(Math.log((y?1:0)+C.length===1?1:(y?1:0)+C.length)/Math.log(2))+1}, minmax(0, 1fr))`}},u.createElement("div",{className:"fastplayContainer "+(D?"show":"")},u.createElement("div",{className:"title"}," Whiteboard Replay from: ",u.createElement("span",null,T)," "),u.createElement(b,{className:"closeIconContainer",onClick:()=>{R(!1)}},u.createElement(k,{fontSize:"large"})),u.createElement("div",{className:"imageContainer"},u.createElement("img",{alt:"whiteboard",ref:z}))),u.createElement("div",{className:"",style:{display:d?"flex":"none"}},u.createElement(Ce,{isSharing:d})),y&&!d&&u.createElement("div",{className:"vidContainer self"},u.createElement("div",{className:"username"},"You"),u.createElement("video",{className:"vid",ref:e=>{if(e)return e.srcObject=y},muted:!0,autoPlay:!0,playsInline:!0})),C.map((({stream:e,username:t})=>u.createElement("div",{className:"vidContainer",key:e.id},u.createElement("div",{className:"username"},t," "),u.createElement("video",{className:"vid",ref:t=>{if(t)return t.srcObject=e},autoPlay:!0,playsInline:!0})))),u.createElement("div",{className:["whiteboardImgContainer",P?"show":""].join(" ")},u.createElement("div",{className:"title"},M),u.createElement("div",{className:"imageContainer"},u.createElement("img",{alt:"whiteboard",ref:X}))))),u.createElement(ge,{showChat:B,setShowChat:Y}),u.createElement(ke,{roomName:$,isAdmin:Q.isAdmin,micIsSharing:h,desktopIsSharing:g,exportUsersActivity:()=>{W.emit("export-activities")},exportChatMessages:()=>{W.emit("export-chat")},toggleChats:()=>{Y((e=>!e))},clearChat:()=>{W.emit("clear-chat")},fastplayClick:()=>{q.current?ae():W.emit("full-whiteboard-data")},shareDesktopOnClick:()=>{if(y){0!==y.getVideoTracks().length?(Se(y,"video",!g),f(!g)):ne()}else ne()},shareMicrophoneOnClick:()=>{if(y){0!==y.getAudioTracks().length?(console.log("has audio track so toggle audio"),Se(y,"audio",!h),E(!h)):te()}else console.log("self stream was empty"),te()},shareWhiteboardClick:()=>{d?(p(!1),W.emit("disconnect-whiteboard")):p(!0)}}))}function Ie(){const[e,t]=m.exports.useState(!0),n=te({props:{MuiButtonBase:{disableRipple:!0}},palette:{type:e?"dark":"light",primary:{main:e?"#757575":"#01579B"},secondary:{light:"#0066ff",main:"#0044ff",contrastText:"#ffcc00"}},shape:{borderRadius:0},overrides:{MuiPaper:{elevation1:{background:e?"#262829":null,"box-shadow":"0 0px 15px 0 rgba(0,0,0,.08)"}}}});return u.createElement(ne,{theme:n},u.createElement(ae,{maxSnack:3},u.createElement(re,null,u.createElement(se,null,u.createElement(le,{exact:!0,path:"/",render:()=>u.createElement(De,{setDarkTheme:t,darkTheme:e})})))))}oe.render(u.createElement(u.StrictMode,null,u.createElement(Ie,null)),document.getElementById("root"));
